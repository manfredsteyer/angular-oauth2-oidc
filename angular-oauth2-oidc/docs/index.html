<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>angular-oauth2-oidc</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="./images/favicon.ico">
	    <link rel="stylesheet" href="./styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="./" class="navbar-brand">angular-oauth2-oidc</a>
            <button type="button" class="btn btn-default btn-menu fa fa-bars" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
            <div id="book-search-input" role="search">
                <input type="text" placeholder="Type to search">
            </div>
            <nav>
            
                <ul class="list">
            
                    <li class="title">
                        <a href="./index.html">angular-oauth2-oidc</a>
                    </li>
            
                    <li class="divider"></li>
            
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./index.html"><span class="fa fa-home"></span>Getting started</a>
                        <ul class="links">
                                <li class="link">
                                    <a 
                                        
                                         href="./overview.html" 
                                         href="./overview.html" 
                                        >
                                        <span class="fa fa-th"></span>Overview
                                    </a>
                                </li>
                                <li class="link">
                                  <a href="./index.html"  class="active" ><span class="fa fa-file-text-o"></span>README</a>
                                </li>
                                <li class="link">
                                        <a href="./license.html"
                                    >
                                        <span class="fa fa-file-text-o"></span>LICENSE
                                    </a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-additional-pages"
                            >
                            <span class="fa fa-book"></span>
                            <span>Additional documentation</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-additional-pages"
                            >
                                <li class="link ">
                                    <a href="./additional-documentation/getting-started.html" >Getting Started</a>
                                </li>
                                <li class="link ">
                                    <a href="./additional-documentation/preserving-state-(like-the-requested-url).html" >Preserving State (like the Requested URL)</a>
                                </li>
                                <li class="link ">
                                    <a href="./additional-documentation/refreshing-a-token-(silent-refresh).html" >Refreshing a Token (Silent Refresh)</a>
                                </li>
                                <li class="link ">
                                    <a href="./additional-documentation/working-with-httpinterceptors.html" >Working with HttpInterceptors</a>
                                </li>
                                <li class="link ">
                                    <a href="./additional-documentation/callback-after-login.html" >Callback after login</a>
                                </li>
                                <li class="link ">
                                    <a href="./additional-documentation/custom-query-parameters.html" >Custom Query Parameters</a>
                                </li>
                                <li class="link ">
                                    <a href="./additional-documentation/events.html" >Events</a>
                                </li>
                                <li class="link ">
                                    <a href="./additional-documentation/routing-with-the-hashstrategy.html" >Routing with the HashStrategy</a>
                                </li>
                                <li class="link ">
                                    <a href="./additional-documentation/configure/-adapt-id_token-validation.html" >Configure/ Adapt id_token Validation</a>
                                </li>
                                <li class="link ">
                                    <a href="./additional-documentation/session-checks.html" >Session Checks</a>
                                </li>
                                <li class="link ">
                                    <a href="./additional-documentation/configure-library-for-implicit-flow-without-discovery-document.html" >Configure Library for Implicit Flow without discovery document</a>
                                </li>
                                <li class="link ">
                                    <a href="./additional-documentation/using-systemjs.html" >Using SystemJS</a>
                                </li>
                                <li class="link ">
                                    <a href="./additional-documentation/original-config-api.html" >Original Config API</a>
                                </li>
                                <li class="link ">
                                    <a href="./additional-documentation/using-password-flow.html" >Using Password Flow</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <a data-type="chapter-link" href="./modules.html" >
                            <div class="menu-toggler linked" data-toggle="collapse"
                                    data-target="#xs-modules-links"
                            >
                                <span class="fa fa-archive"></span>
                                <span class="link-name">Modules</span>
                                <span class="fa fa-angle-down"></span>
                            </div>
                        </a>
                        <ul class="links collapse "
                                id="xs-modules-links"
                            >
                                <li class="link">
                                    <a href="./modules/OAuthModule.html" >OAuthModule</a>
                                </li>
                        </ul>
                    </li>
            
            
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-classes-links"
                            >
                            <span class="fa fa-file-code-o"></span>
                            <span>Classes</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-classes-links"
                            >
                                <li class="link">
                                    <a href="./classes/AbstractValidationHandler.html" >AbstractValidationHandler</a>
                                </li>
                                <li class="link">
                                    <a href="./classes/AuthConfig.html" >AuthConfig</a>
                                </li>
                                <li class="link">
                                    <a href="./classes/JwksValidationHandler.html" >JwksValidationHandler</a>
                                </li>
                                <li class="link">
                                    <a href="./classes/LoginOptions.html" >LoginOptions</a>
                                </li>
                                <li class="link">
                                    <a href="./classes/NullValidationHandler.html" >NullValidationHandler</a>
                                </li>
                                <li class="link">
                                    <a href="./classes/OAuthErrorEvent.html" >OAuthErrorEvent</a>
                                </li>
                                <li class="link">
                                    <a href="./classes/OAuthEvent.html" >OAuthEvent</a>
                                </li>
                                <li class="link">
                                    <a href="./classes/OAuthInfoEvent.html" >OAuthInfoEvent</a>
                                </li>
                                <li class="link">
                                    <a href="./classes/OAuthModuleConfig.html" >OAuthModuleConfig</a>
                                </li>
                                <li class="link">
                                    <a href="./classes/OAuthNoopResourceServerErrorHandler.html" >OAuthNoopResourceServerErrorHandler</a>
                                </li>
                                <li class="link">
                                    <a href="./classes/OAuthResourceServerConfig.html" >OAuthResourceServerConfig</a>
                                </li>
                                <li class="link">
                                    <a href="./classes/OAuthResourceServerErrorHandler.html" >OAuthResourceServerErrorHandler</a>
                                </li>
                                <li class="link">
                                    <a href="./classes/OAuthStorage.html" >OAuthStorage</a>
                                </li>
                                <li class="link">
                                    <a href="./classes/OAuthSuccessEvent.html" >OAuthSuccessEvent</a>
                                </li>
                                <li class="link">
                                    <a href="./classes/ReceivedTokens.html" >ReceivedTokens</a>
                                </li>
                                <li class="link">
                                    <a href="./classes/ValidationHandler.html" >ValidationHandler</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-injectables-links"
                            >
                            <span class="fa fa-long-arrow-down"></span>
                            <span>Injectables</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-injectables-links"
                            >
                                <li class="link">
                                    <a href="./injectables/OAuthService.html" >OAuthService</a>
                                </li>
                                <li class="link">
                                    <a href="./injectables/UrlHelperService.html" >UrlHelperService</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-interceptors-links"
                            >
                            <span class="fa fa-exchange"></span>
                            <span>Interceptors</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-interceptors-links"
                            >
                                <li class="link">
                                    <a href="./interceptors/DefaultOAuthInterceptor.html" >DefaultOAuthInterceptor</a>
                                </li>
                        </ul>
                    </li>
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-interfaces-links"
                            >
                            <span class="fa fa-info"></span>
                            <span>Interfaces</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-interfaces-links"
                            >
                                <li class="link">
                                    <a href="./interfaces/OidcDiscoveryDoc.html" >OidcDiscoveryDoc</a>
                                </li>
                                <li class="link">
                                    <a href="./interfaces/ParsedIdToken.html" >ParsedIdToken</a>
                                </li>
                                <li class="link">
                                    <a href="./interfaces/TokenResponse.html" >TokenResponse</a>
                                </li>
                                <li class="link">
                                    <a href="./interfaces/UserInfo.html" >UserInfo</a>
                                </li>
                                <li class="link">
                                    <a href="./interfaces/ValidationParams.html" >ValidationParams</a>
                                </li>
                        </ul>
                    </li>
            
            
                    <li class="chapter">
                        <div class="simple menu-toggler" data-toggle="collapse"
                                data-target="#xs-miscellaneous-links"
                            >
                            <span class="fa fa-cubes"></span>
                            <span>Miscellaneous</span>
                            <span class="fa fa-angle-down"></span>
                        </div>
                        <ul class="links collapse "
                                id="xs-miscellaneous-links"
                            >
                                <li class="link">
                                  <a href="./miscellaneous/functions.html" data-type="entity-link" >Functions</a>
                                </li>
                                <li class="link">
                                  <a href="./miscellaneous/typealiases.html" data-type="entity-link" >Type aliases</a>
                                </li>
                                <li class="link">
                                  <a href="./miscellaneous/variables.html" data-type="entity-link" >Variables</a>
                                </li>
                        </ul>
                    </li>
            
            
            
            
                </ul>
            
            </nav>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <nav>
                   
                       <ul class="list">
                   
                           <li class="title">
                               <a href="./index.html">angular-oauth2-oidc</a>
                           </li>
                   
                           <li class="divider"></li>
                   
                               <div id="book-search-input" role="search">
                                   <input type="text" placeholder="Type to search">
                               </div>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./index.html"><span class="fa fa-home"></span>Getting started</a>
                               <ul class="links">
                                       <li class="link">
                                           <a 
                                               
                                                href="./overview.html" 
                                                href="./overview.html" 
                                               >
                                               <span class="fa fa-th"></span>Overview
                                           </a>
                                       </li>
                                       <li class="link">
                                         <a href="./index.html"  class="active" ><span class="fa fa-file-text-o"></span>README</a>
                                       </li>
                                       <li class="link">
                                               <a href="./license.html"
                                           >
                                               <span class="fa fa-file-text-o"></span>LICENSE
                                           </a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#additional-pages"
                   >
                                   <span class="fa fa-book"></span>
                                   <span>Additional documentation</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="additional-pages"
                   >
                                       <li class="link ">
                                           <a href="./additional-documentation/getting-started.html" >Getting Started</a>
                                       </li>
                                       <li class="link ">
                                           <a href="./additional-documentation/preserving-state-(like-the-requested-url).html" >Preserving State (like the Requested URL)</a>
                                       </li>
                                       <li class="link ">
                                           <a href="./additional-documentation/refreshing-a-token-(silent-refresh).html" >Refreshing a Token (Silent Refresh)</a>
                                       </li>
                                       <li class="link ">
                                           <a href="./additional-documentation/working-with-httpinterceptors.html" >Working with HttpInterceptors</a>
                                       </li>
                                       <li class="link ">
                                           <a href="./additional-documentation/callback-after-login.html" >Callback after login</a>
                                       </li>
                                       <li class="link ">
                                           <a href="./additional-documentation/custom-query-parameters.html" >Custom Query Parameters</a>
                                       </li>
                                       <li class="link ">
                                           <a href="./additional-documentation/events.html" >Events</a>
                                       </li>
                                       <li class="link ">
                                           <a href="./additional-documentation/routing-with-the-hashstrategy.html" >Routing with the HashStrategy</a>
                                       </li>
                                       <li class="link ">
                                           <a href="./additional-documentation/configure/-adapt-id_token-validation.html" >Configure/ Adapt id_token Validation</a>
                                       </li>
                                       <li class="link ">
                                           <a href="./additional-documentation/session-checks.html" >Session Checks</a>
                                       </li>
                                       <li class="link ">
                                           <a href="./additional-documentation/configure-library-for-implicit-flow-without-discovery-document.html" >Configure Library for Implicit Flow without discovery document</a>
                                       </li>
                                       <li class="link ">
                                           <a href="./additional-documentation/using-systemjs.html" >Using SystemJS</a>
                                       </li>
                                       <li class="link ">
                                           <a href="./additional-documentation/original-config-api.html" >Original Config API</a>
                                       </li>
                                       <li class="link ">
                                           <a href="./additional-documentation/using-password-flow.html" >Using Password Flow</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <a data-type="chapter-link" href="./modules.html" >
                                   <div class="menu-toggler linked" data-toggle="collapse"
                                           data-target="#modules-links"
                                   >
                                       <span class="fa fa-archive"></span>
                                       <span class="link-name">Modules</span>
                                       <span class="fa fa-angle-down"></span>
                                   </div>
                               </a>
                               <ul class="links collapse "
                                       id="modules-links"
                   >
                                       <li class="link">
                                           <a href="./modules/OAuthModule.html" >OAuthModule</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#classes-links"
                   >
                                   <span class="fa fa-file-code-o"></span>
                                   <span>Classes</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="classes-links"
                   >
                                       <li class="link">
                                           <a href="./classes/AbstractValidationHandler.html" >AbstractValidationHandler</a>
                                       </li>
                                       <li class="link">
                                           <a href="./classes/AuthConfig.html" >AuthConfig</a>
                                       </li>
                                       <li class="link">
                                           <a href="./classes/JwksValidationHandler.html" >JwksValidationHandler</a>
                                       </li>
                                       <li class="link">
                                           <a href="./classes/LoginOptions.html" >LoginOptions</a>
                                       </li>
                                       <li class="link">
                                           <a href="./classes/NullValidationHandler.html" >NullValidationHandler</a>
                                       </li>
                                       <li class="link">
                                           <a href="./classes/OAuthErrorEvent.html" >OAuthErrorEvent</a>
                                       </li>
                                       <li class="link">
                                           <a href="./classes/OAuthEvent.html" >OAuthEvent</a>
                                       </li>
                                       <li class="link">
                                           <a href="./classes/OAuthInfoEvent.html" >OAuthInfoEvent</a>
                                       </li>
                                       <li class="link">
                                           <a href="./classes/OAuthModuleConfig.html" >OAuthModuleConfig</a>
                                       </li>
                                       <li class="link">
                                           <a href="./classes/OAuthNoopResourceServerErrorHandler.html" >OAuthNoopResourceServerErrorHandler</a>
                                       </li>
                                       <li class="link">
                                           <a href="./classes/OAuthResourceServerConfig.html" >OAuthResourceServerConfig</a>
                                       </li>
                                       <li class="link">
                                           <a href="./classes/OAuthResourceServerErrorHandler.html" >OAuthResourceServerErrorHandler</a>
                                       </li>
                                       <li class="link">
                                           <a href="./classes/OAuthStorage.html" >OAuthStorage</a>
                                       </li>
                                       <li class="link">
                                           <a href="./classes/OAuthSuccessEvent.html" >OAuthSuccessEvent</a>
                                       </li>
                                       <li class="link">
                                           <a href="./classes/ReceivedTokens.html" >ReceivedTokens</a>
                                       </li>
                                       <li class="link">
                                           <a href="./classes/ValidationHandler.html" >ValidationHandler</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#injectables-links"
                   >
                                   <span class="fa fa-long-arrow-down"></span>
                                   <span>Injectables</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="injectables-links"
                   >
                                       <li class="link">
                                           <a href="./injectables/OAuthService.html" >OAuthService</a>
                                       </li>
                                       <li class="link">
                                           <a href="./injectables/UrlHelperService.html" >UrlHelperService</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#interceptors-links"
                   >
                                   <span class="fa fa-exchange"></span>
                                   <span>Interceptors</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="interceptors-links"
                   >
                                       <li class="link">
                                           <a href="./interceptors/DefaultOAuthInterceptor.html" >DefaultOAuthInterceptor</a>
                                       </li>
                               </ul>
                           </li>
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#interfaces-links"
                   >
                                   <span class="fa fa-info"></span>
                                   <span>Interfaces</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="interfaces-links"
                   >
                                       <li class="link">
                                           <a href="./interfaces/OidcDiscoveryDoc.html" >OidcDiscoveryDoc</a>
                                       </li>
                                       <li class="link">
                                           <a href="./interfaces/ParsedIdToken.html" >ParsedIdToken</a>
                                       </li>
                                       <li class="link">
                                           <a href="./interfaces/TokenResponse.html" >TokenResponse</a>
                                       </li>
                                       <li class="link">
                                           <a href="./interfaces/UserInfo.html" >UserInfo</a>
                                       </li>
                                       <li class="link">
                                           <a href="./interfaces/ValidationParams.html" >ValidationParams</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                           <li class="chapter">
                               <div class="simple menu-toggler" data-toggle="collapse"
                                       data-target="#miscellaneous-links"
                   >
                                   <span class="fa fa-cubes"></span>
                                   <span>Miscellaneous</span>
                                   <span class="fa fa-angle-down"></span>
                               </div>
                               <ul class="links collapse "
                                       id="miscellaneous-links"
                   >
                                       <li class="link">
                                         <a href="./miscellaneous/functions.html" data-type="entity-link" >Functions</a>
                                       </li>
                                       <li class="link">
                                         <a href="./miscellaneous/typealiases.html" data-type="entity-link" >Type aliases</a>
                                       </li>
                                       <li class="link">
                                         <a href="./miscellaneous/variables.html" data-type="entity-link" >Variables</a>
                                       </li>
                               </ul>
                           </li>
                   
                   
                   
                   
                       </ul>
                   
                   </nav>
               </div>
               <div class="content getting-started">
                   <div class="content-data">

<h1 id="angular-oauth2-oidc">angular-oauth2-oidc</h1>
<p>Support for OAuth 2 and OpenId Connect (OIDC) in Angular.</p>
<p><img src="https://raw.githubusercontent.com/manfredsteyer/angular-oauth2-oidc/master/oidc.png" alt="OIDC Certified Logo" class="img-responsive"</p>
<h2 id="credits">Credits</h2>
<ul>
<li><a href="https://github.com/jvandemo/generator-angular2-library">generator-angular2-library</a> for scaffolding a angular library</li>
<li><a href="https://kjur.github.io/jsrsasign/">jsrasign</a> for validating token signature and for hashing</li>
<li><a href="https://github.com/identityserver">Identity Server</a> (used for Testing with an .NET/.NET Core Backend)</li>
<li><a href="http://www.keycloak.org/">Keycloak (Redhad)</a> for Testing with Java</li>
</ul>
<h2 id="resources">Resources</h2>
<ul>
<li><p>Sources and Sample:
<a href="https://github.com/manfredsteyer/angular-oauth2-oidc">https://github.com/manfredsteyer/angular-oauth2-oidc</a></p>
</li>
<li><p>Source Code Documentation
<a href="https://manfredsteyer.github.io/angular-oauth2-oidc/angular-oauth2-oidc/docs/">https://manfredsteyer.github.io/angular-oauth2-oidc/angular-oauth2-oidc/docs/</a></p>
</li>
</ul>
<h2 id="tested-environment">Tested Environment</h2>
<p>Successfully tested with Angular 4.3+, Angular 5 and its Router,PathLocationStrategy as well as HashLocationStrategy and CommonJS-Bundling via webpack. At server side we&#39;ve used IdentityServer (.NET/ .NET Core) and Redhat&#39;s Keycloak (Java).</p>
<h2 id="new-features-in-version-3-0">New Features in Version 3.0</h2>
<p>See <a href="https://github.com/manfredsteyer/angular-oauth2-oidc/releases/tag/3.0.1">Release Notes</a></p>
<h2 id="new-features-in-version-2-1">New Features in Version 2.1</h2>
<ul>
<li>New Config API (the original one is still supported)</li>
<li>New convenience methods in OAuthService to streamline default tasks:<ul>
<li><code>setupAutomaticSilentRefresh()</code></li>
<li><code>loadDiscoveryDocumentAndTryLogin()</code></li>
</ul>
</li>
<li>Single Sign out through Session Status Change Notification according to the OpenID Connect Session Management specs. This means, you can be notified when the user logs out using at the login provider.</li>
<li>Possibility to define the ValidationHandler, the Config as well as the OAuthStorage via DI</li>
<li>Better structured documentation</li>
</ul>
<h2 id="new-features-in-version-2">New Features in Version 2</h2>
<ul>
<li>Token Refresh for Implicit Flow by implementing &quot;silent refresh&quot;</li>
<li>Validating the signature of the received id_token</li>
<li>Providing Events via the observable <code>events</code>.</li>
<li>The event <code>token_expires</code> can be used togehter with a silent refresh to automatically refresh a token when/ before it expires (see also property <code>timeoutFactor</code>).</li>
</ul>
<h2 id="additional-features">Additional Features</h2>
<ul>
<li>Logging in via OAuth2 and OpenId Connect (OIDC) Implicit Flow (where user is redirected to Identity Provider)</li>
<li>&quot;Logging in&quot; via Password Flow (where user enters his/her password into the client)</li>
<li>Token Refresh for Password Flow by using a Refresh Token</li>
<li>Automatically refreshing a token when/ some time before it expires</li>
<li>Querying Userinfo Endpoint</li>
<li>Querying Discovery Document to ease configuration</li>
<li>Validating claims of the id_token regarding the specs</li>
<li>Hook for further custom validations</li>
<li>Single-Sign-Out by redirecting to the auth-server&#39;s logout-endpoint</li>
</ul>
<h2 id="breaking-changes-in-version-2">Breaking Changes in Version 2</h2>
<ul>
<li>The property <code>oidc</code> defaults to <code>true</code>.</li>
<li>If you are just using oauth2, you have to set <code>oidc</code> to <code>false</code>. Otherwise, the validation of the user profile will fail!</li>
<li>By default, <code>sessionStorage</code> is used. To use <code>localStorage</code> call method setStorage</li>
<li>Demands using https as OIDC and OAuth2 relay on it. This rule can be relaxed using the property <code>requireHttps</code>, e. g. for local testing.</li>
<li>Demands that every url provided by the discovery document starts with the issuer&#39;s url. This can be relaxed by using the property <code>strictDiscoveryDocumentValidation</code>.</li>
</ul>
<h2 id="sample-auth-server">Sample-Auth-Server</h2>
<p>You can use the OIDC-Sample-Server mentioned in the samples for Testing. It assumes, that your Web-App runns on <a href="http://localhost:8080">http://localhost:8080</a>.</p>
<p>Username/Password: max/geheim</p>
<p><em>clientIds:</em> </p>
<ul>
<li>spa-demo (implicit flow)</li>
<li>demo-resource-owner (resource owner password flow)</li>
</ul>
<p><em>redirectUris:</em></p>
<ul>
<li>localhost:[8080-8089|4200-4202]</li>
<li>localhost:[8080-8089|4200-4202]/index.html</li>
<li>localhost:[8080-8089|4200-4202]/silent-refresh.html</li>
</ul>
<h2 id="installing">Installing</h2>
<pre class="line-numbers"><code class="language-none">npm i angular-oauth2-oidc --save</code></pre><h2 id="importing-the-ngmodule">Importing the NgModule</h2>
<pre class="line-numbers"><code class="language-TypeScript">import { OAuthModule } from &#39;angular-oauth2-oidc&#39;;
[...]

&#64;NgModule({
  imports: [ 
    [...]
    HttpModule,
    OAuthModule.forRoot()
  ],
  declarations: [
    AppComponent,
    HomeComponent,
    [...]
  ],
  bootstrap: [
    AppComponent 
  ]
})
export class AppModule {
}</code></pre><h2 id="configuring-for-implicit-flow">Configuring for Implicit Flow</h2>
<p>This section shows how to implement login leveraging implicit flow. This is the OAuth2/OIDC flow best suitable for
Single Page Application. It sends the user to the Identity Provider&#39;s login page. After logging in, the SPA gets tokens.
This also allows for single sign on as well as single sign off.</p>
<p>To configure the library the following sample uses the new configuration API introduced with Version 2.1.
Hence, The original API is still supported.</p>
<pre class="line-numbers"><code class="language-TypeScript">import { AuthConfig } from &#39;angular-oauth2-oidc&#39;;

export const authConfig: AuthConfig = {

  // Url of the Identity Provider
  issuer: &#39;https://steyer-identity-server.azurewebsites.net/identity&#39;,

  // URL of the SPA to redirect the user to after login
  redirectUri: window.location.origin + &#39;/index.html&#39;,

  // The SPA&#39;s id. The SPA is registerd with this id at the auth-server
  clientId: &#39;spa-demo&#39;,

  // set the scope for the permissions the client should request
  // The first three are defined by OIDC. The 4th is a usecase-specific one
  scope: &#39;openid profile email voucher&#39;,
}</code></pre><p>Configure the OAuthService with this config object when the application starts up:</p>
<pre class="line-numbers"><code class="language-TypeScript">import { OAuthService } from &#39;angular-oauth2-oidc&#39;;
import { JwksValidationHandler } from &#39;angular-oauth2-oidc&#39;;
import { authConfig } from &#39;./auth.config&#39;;
import { Component } from &#39;&#64;angular/core&#39;;

&#64;Component({
    selector: &#39;flight-app&#39;,
    templateUrl: &#39;./app.component.html&#39;
})
export class AppComponent {

    constructor(private oauthService: OAuthService) {
      this.configureWithNewConfigApi();
    }

    private configureWithNewConfigApi() {
      this.oauthService.configure(authConfig);
      this.oauthService.tokenValidationHandler = new JwksValidationHandler();
      this.oauthService.loadDiscoveryDocumentAndTryLogin();
    }
}</code></pre><h3 id="implementing-a-login-form">Implementing a Login Form</h3>
<p>After you&#39;ve configured the library, you just have to call <code>initImplicitFlow</code> to login using OAuth2/ OIDC.</p>
<pre class="line-numbers"><code class="language-TypeScript">import { Component } from &#39;&#64;angular/core&#39;;
import { OAuthService } from &#39;angular-oauth2-oidc&#39;;

&#64;Component({
    templateUrl: &quot;app/home.html&quot;
})
export class HomeComponent {

    constructor(private oauthService: OAuthService) {
    }

    public login() {
        this.oauthService.initImplicitFlow();
    }

    public logoff() {
        this.oauthService.logOut();
    }

    public get name() {
        let claims = this.oAuthService.getIdentityClaims();
        if (!claims) return null;
        return claims.given_name;
    }

}</code></pre><p>The following snippet contains the template for the login page:</p>
<pre class="line-numbers"><code class="language-HTML">&lt;h1 *ngIf=&quot;!name&quot;&gt;
    Hallo
&lt;/h1&gt;
&lt;h1 *ngIf=&quot;name&quot;&gt;
    Hallo, {{name}}
&lt;/h1&gt;

&lt;button class=&quot;btn btn-default&quot; (click)=&quot;login()&quot;&gt;
    Login
&lt;/button&gt;
&lt;button class=&quot;btn btn-default&quot; (click)=&quot;logoff()&quot;&gt;
    Logout
&lt;/button&gt;

&lt;div&gt;
    Username/Passwort zum Testen: max/geheim
&lt;/div&gt;</code></pre><h3 id="skipping-the-login-form">Skipping the login form</h3>
<p>If you don&#39;t want to display a login form that tells the user that they are redirected to the identity server, you can use the convenince function <code>this.oauthService.loadDiscoveryDocumentAndLogin();</code> instead of <code>this.oauthService.loadDiscoveryDocumentAndTryLogin();</code> when setting up the library. </p>
<p>This directly redirects the user to the identity server if there are no valid tokens. </p>
<h3 id="calling-a-web-api-with-an-access-token">Calling a Web API with an Access Token</h3>
<p>Pass this Header to the used method of the <code>Http</code>-Service within an Instance of the class <code>Headers</code>:</p>
<pre class="line-numbers"><code class="language-TypeScript">var headers = new Headers({
    &quot;Authorization&quot;: &quot;Bearer &quot; + this.oauthService.getAccessToken()
});</code></pre><p>If you are using the new HttpClient, use the class HttpHeaders instead:</p>
<pre class="line-numbers"><code class="language-TypeScript">var headers = new HttpHeaders({
    &quot;Authorization&quot;: &quot;Bearer &quot; + this.oauthService.getAccessToken()
});</code></pre><h2 id="some-infos-about-routing">Some infos about Routing</h2>
<h2 id="more-documentation">More Documentation</h2>
<p>See the <a href="https://manfredsteyer.github.io/angular-oauth2-oidc/angular-oauth2-oidc/docs/">documentation</a> for more information about this library.</p>














                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
           </div>
       </div>

       <script src="./js/libs/bootstrap-native.js"></script>

       <script src="./js/libs/es6-shim.min.js"></script>
       <script src="./js/libs/EventDispatcher.js"></script>
       <script src="./js/libs/promise.min.js"></script>
       <script src="./js/libs/zepto.min.js"></script>

       <script src="./js/compodoc.js"></script>

       <script>var COMPODOC_CURRENT_PAGE_DEPTH = 0;</script>

       <script src="./js/search/search.js"></script>
       <script src="./js/search/lunr.min.js"></script>
       <script src="./js/search/search-lunr.js"></script>

       <script src="./js/tabs.js"></script>
       <script src="./js/menu.js"></script>
       <script src="./js/libs/prism.js"></script>
       <script src="./js/sourceCode.js"></script>
       <script src="./js/search/search_index.js"></script>

    </body>
</html>
